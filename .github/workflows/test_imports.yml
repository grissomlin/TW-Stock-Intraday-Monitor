# .github/workflows/test_imports.yml
name: Test Python Imports

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]
  workflow_dispatch:

jobs:
  test-imports:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.10'
    
    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install -r requirements.txt
    
    - name: Test imports
      run: |
        echo "測試 Python 導入..."
        python -c "
import sys
import os

print('Python 版本:', sys.version)
print('當前目錄:', os.getcwd())
print('目錄內容:')
for f in os.listdir('.'):
    print(f'  {f}')

print('\n嘗試導入模組...')
try:
    from supabase import create_client
    print('✅ supabase 導入成功')
except ImportError as e:
    print(f'❌ supabase 導入失敗: {e}')

try:
    import google.generativeai as genai
    print('✅ google.generativeai 導入成功')
except ImportError as e:
    print(f'❌ google.generativeai 導入失敗: {e}')

try:
    import pandas as pd
    print('✅ pandas 導入成功')
except ImportError as e:
    print(f'❌ pandas 導入失敗: {e}')

print('\n測試自訂模組導入...')
sys.path.insert(0, os.getcwd())

try:
    from ai_analyzer import StockAIAnalyzer
    print('✅ ai_analyzer 導入成功')
except ImportError as e:
    print(f'❌ ai_analyzer 導入失敗: {e}')

try:
    from prompts import StockPrompts
    print('✅ prompts 導入成功')
except ImportError as e:
    print(f'❌ prompts 導入失敗: {e}')
        "
